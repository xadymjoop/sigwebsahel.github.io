<!DOCTYPE html>
<!-- Created By Khadim DIOP -->
<html lang="en" dir="ltr">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />


      <title>SIG-WEB</title>
      <link rel="stylesheet" href="style.css">
      <link type="text/css" rel="stylesheet" href="https://api.mqcdn.com/sdk/mapquest-js/v1.3.2/mapquest.css"/>

      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css"/>
      <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
      <link rel="stylesheet" href="Leaflet/dist/leaflet.css" />

      <script src="Leaflet/dist/leaflet-src.js"></script>
      <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
      <script src="catiline.js"></script>
      <script src="leaflet.shpfile.js"></script>
      <script src="https://unpkg.com/chroma-js"></script>
      <script src="leaflet/shp/dist/shp.js"></script>
      <script src="leaflet/leaflet-shpfile/leaflet.shpfile.js"></script>

   </head>


   <body>

     <nav class="navbar navbar-inverse">

        <div class="container-fluid">

          <a class="navbar-brand" href="#">
            <img src="logo.png" alt="" width="250" height="70" class="d-inline-block align-text-top">
            <ul>
              <li><a class="active" href="#">Accueil</a></li>
              <li><a href="#">Map</a></li>
              <li><a href="#">Donn√©es</a></li>
              <li><a href="#">Contact</a></li>
              <li><a href="#">Feedback</a></li>
            </ul>
          </a>


        </div>
        <div class="container-fluid">
          <div class="row">
            <div id="map" style="width:100%; height:850px;"></div>

          </div>

        </div>
      </nav>



      <script>



      // Initialiser la carte
    var map = new L.Map("map", {
      center: new L.LatLng(14.70, -17.24),
      zoom: 12,

    });

    // baseMaps
 var baselayers = {
World_Topo_Map:L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}'),
World_Imagery: L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services//World_Imagery/MapServer/tile/{z}/{y}/{x}'),
DBcarto: L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png'),
openstreetmap:  L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png')};baselayers.World_Imagery.addTo(map);

// Ajout d'un onglet de controle

ctlLayer= L.control.layers(baselayers).addTo(map);
// Ajout de l'echelle
ctlEchel= L.control.scale().addTo(map);

//  Les courbes de niveau des Tas
    var limiteTas = new L.Shapefile('tas.zip', {
          onEachFeature: function(feature, layer) {

              layer.bindPopup(Object.keys(feature.properties).map(function(k) {
                return k + ": " + feature.properties[k];
              }).join("<br />"), {
                maxHeight: 200
              });

          }  ,
            style:{
            fillOpacity:0,
            color: 'black',
          }

        });
        limiteTas.addTo(map);
        limiteTas.once("data:loaded", function() {
          console.log("finished loaded shapefile");
        });


    // Importation des courbes de niveau
        var courbeNiveau = new L.Shapefile('CN.zip', {
    			onEachFeature: function(feature, layer) {

            layer.bindPopup('<b>Courbe de niveau</b>'+ feature.properties)

    			}
          ,

            style:{
            fillOpacity:0,
            color: 'red',
            weight: 0.5,
        }

    		});
    		courbeNiveau.addTo(map);
    		courbeNiveau.once("data:loaded", function() {
    			console.log("finished loaded shapefile");
    		});

 // Limite de Soccocim
  var soccocim = new L.Shapefile('limite.zip', {

      style:{
      fillOpacity:0,
      color: 'black',
  }

  });
  soccocim.addTo(map);
  soccocim.once("data:loaded", function() {
    console.log("finished loaded shapefile");
  });


// ajout de couche raster
var imageUrl = 'sahel.png';
       var imageBounds = [

       [14.713269,-17.240199],
       [14.711767,-17.240182],
       [14.713290,-17.238511],
       [14.711785,-17.238489]];

coucheRaster= L.imageOverlay(imageUrl, imageBounds).addTo(map);

L.control.layers(courbeNiveau,soccocim,imageUrl).addTo(map);


      </script>
   </body>
</html>
